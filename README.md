
# 升级5.8.3修改说明

接手时是5.7.9版本，改的5.8.0版本由于是大改，而且没有文档，盲改2、3个月仍有很多bug，基本上修改了一些原有逻辑。
在拿到文档后，该版本又重新做了修改。修改时仍保持对原有逻辑的处理。所以该版本基本保持对性能稳定性的要求。可以作为新版的基础版本继续开发。


解决问题：
1. 修复新建多图片的笔记会创建多个笔记的问题
2. 修复无法创建文件夹的问题
3. 修复无法彻底删除回收站笔记的问题
4. 支付宝sdk升级
5. 修复无法刷新加载文件夹标签的问题
6. 修复微信重新登陆闪退问题
7. 修复9.0上无法显示弹窗内容的问题
8. 增加移动文件夹是否成功的提示
9. 网络框架依赖升级

## 亮点 框架重构

1. 对mvp框架又重构了一遍：以前的5.8.0的mvp框架，各层划分不清，导致v层仍有大量数据操作，m层相同功能过于重叠，代码重复率过高，修改后，达到标准mvp框架要求。
2. m层重点重构：减少v层不必要的数据操作，逻辑操作都转移到m层；m层相同逻辑相同接口的操作合为一个m具体类，m层具体细分由功能决定，而不是activity界面决定，m层细分后，
各种调用由p层区分，p层控制m层的调用，v层控制p层，达到调用分层的目的，更好体现mvp精髓。

## 待优化 深度优化
如果老板支持再重新设计的话，该软件还是不错的，只是需要一些功能重新设计，一些UI重新设计；UI功能过于单一，体现不了接口的复杂程度。如果只是满足运行的需求，到这个程度，后续没有继续优化的必要了。

如果有新需求设计的话，还可以花时间优化细节：
1. 终止同步块调用Rxjava的unsubscribe(),粒度没有直接调用ok的disposible()/cancel()效果好，可以考虑优化。
2. 数据库操作那块下个版本可以考虑重构下。保留最新即可。
3. 反射调用这块，还有一些遗留老代码考虑删除或重构下，大部分都不用了。


